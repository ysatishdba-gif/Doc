# %% Check what SABs your CUIs actually have
# Use the CUIs you already extracted (before SAB filter)
cuis = ["C0030193", "C0028081", ...]  # paste your raw CUI list here

# Or re-extract
# extractor = CUIExtractor("https://your-api/extract")
# cuis = extractor.extract("your text here")

metadata = system.fetcher.fetch(cuis)
print(f"API extracted: {len(cuis)} CUIs")
print(f"Metadata found: {len(metadata)}/{len(cuis)}")

sab_counts = {}
for c, m in metadata.items():
    for sab in m.source_vocabs:
        sab_counts[sab] = sab_counts.get(sab, 0) + 1

print("\nSABs in your CUIs:")
for sab, count in sorted(sab_counts.items(), key=lambda x: -x[1]):
    print(f"  {sab}: {count}")

print(f"\nYour allowed SABs: {system.sab_filter.allowed}")
