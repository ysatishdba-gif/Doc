# %% What does the graph actually look like for your CUIs?
cui_list = [c for c in cuis if network.has_node(c)]
sample = cui_list[:5]

for cui in sample:
    parents = list(network.predecessors(cui))
    children = list(network.successors(cui))
    print(f"\n{cui}:")
    print(f"  Parents:  {len(parents)}")
    print(f"  Children: {len(children)}")
    
    # Are parents/children also in your CUI set?
    p_in = [p for p in parents if p in set(cuis)]
    c_in = [c for c in children if c in set(cuis)]
    print(f"  Parents in our set:  {len(p_in)}/{len(parents)}")
    print(f"  Children in our set: {len(c_in)}/{len(children)}")
    
    # Show what the parents actually are
    if parents:
        print(f"  First 3 parents: {parents[:3]}")
    if children:
        print(f"  First 3 children: {children[:3]}")

# Also: are these nodes isolated?
isolated = [c for c in cui_list[:500] 
            if network.degree(c) == 0]
print(f"\nIsolated nodes (no edges at all): {len(isolated)}/{min(len(cui_list),500)}")
